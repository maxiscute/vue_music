(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["singer"],{"20d0":function(t,e,n){"use strict";n.r(e);var c=n("7a23"),r=Object(c["P"])("data-v-0a6db5f2");Object(c["y"])("data-v-0a6db5f2");var o={class:"singer"};Object(c["w"])();var u=r((function(t,e,n,u,a,i){var l=Object(c["D"])("singer-list"),s=Object(c["D"])("router-view"),d=Object(c["E"])("loading");return Object(c["N"])((Object(c["v"])(),Object(c["h"])("div",o,[Object(c["N"])(Object(c["j"])(l,{data:u.singers,onClickSinger:i.handleSingerClick},null,8,["data","onClickSinger"]),[[c["K"],u.singers.length]]),Object(c["j"])(s,null,{default:r((function(t){var e=t.Component;return[Object(c["j"])(c["d"],{appear:"",name:"slide"},{default:r((function(){return[(Object(c["v"])(),Object(c["h"])(Object(c["F"])(e),{data:u.clickedSinger},null,8,["data"]))]})),_:2},1024)]})),_:1})],512)),[[d,!u.singers.length]])})),a=n("1da1"),i=(n("ac1f"),n("5319"),n("b0c0"),n("96cf"),n("ae58")),l=n("335a"),s=n("aaef"),d=Object(c["P"])("data-v-c9ad3716");Object(c["y"])("data-v-c9ad3716");var h={ref:"groupRef"},j={class:"list__group__title"},b={class:"name"},f={class:"list__fixed"};Object(c["w"])();var O=d((function(t,e,n,r,o,u){var a=Object(c["D"])("scroller");return Object(c["v"])(),Object(c["h"])(a,{class:"singer-list","probe-type":3,onScroll:r.onScroll,ref:"scrollRef"},{default:d((function(){return[Object(c["j"])("ul",h,[(Object(c["v"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(n.data,(function(t){return Object(c["v"])(),Object(c["h"])("li",{class:"list__group",key:t.title},[Object(c["j"])("h2",j,Object(c["H"])(t.title),1),Object(c["j"])("ul",null,[(Object(c["v"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(t.list,(function(t){return Object(c["v"])(),Object(c["h"])("li",{key:t.id,class:"list__group__item",onClick:function(e){return r.onItemClick(t)}},[Object(c["j"])("img",{class:"avatar",src:t.pic,alt:""},null,8,["src"]),Object(c["j"])("span",b,Object(c["H"])(t.name),1)],8,["onClick"])})),128))])])})),128))],512),Object(c["j"])("div",f,[Object(c["N"])(Object(c["j"])("div",{class:"list__fixed__title",style:r.currentStyle},Object(c["H"])(r.currentTitle),5),[[c["K"],r.currentTitle]])]),Object(c["j"])("div",{class:"list__shortcut",onTouchstart:e[1]||(e[1]=Object(c["O"])((function(){return r.onShortcutTouchStart&&r.onShortcutTouchStart.apply(r,arguments)}),["stop","prevent"])),onTouchmove:e[2]||(e[2]=Object(c["O"])((function(){return r.onShortcutTouchMove&&r.onShortcutTouchMove.apply(r,arguments)}),["stop","prevent"])),onTouchend:e[3]||(e[3]=Object(c["O"])((function(){return r.onShortcutTouchEnd&&r.onShortcutTouchEnd.apply(r,arguments)}),["stop","prevent"]))},[Object(c["N"])(Object(c["j"])("div",{class:"list__shortcut__hint"},Object(c["H"])(r.currentTitle),513),[[c["K"],r.isTouch]]),Object(c["j"])("ul",null,[(Object(c["v"])(!0),Object(c["h"])(c["a"],null,Object(c["B"])(r.shortcutList,(function(t,e){return Object(c["v"])(),Object(c["h"])("li",{class:["list__shortcut__item",{current:r.currentIndex===e}],key:t,"data-index":e},Object(c["H"])(t),11,["data-index"])})),128))])],32)]})),_:1},8,["onScroll"])})),v=n("1d73");function g(t){var e=30,n=Object(c["A"])(null),r=Object(c["A"])([]),o=Object(c["A"])(0),u=Object(c["A"])(0),i=Object(c["A"])(0),l=Object(c["f"])((function(){if(o.value<0)return"";var e=t.data[u.value];return e?e.title:""})),s=Object(c["f"])((function(){var t=i.value,n=t>0&&t<e?t-e:0;return{transform:"translate3d(0,".concat(n,"px, 0)")}})),d=Object(c["L"])((function(){return t.data}),Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["p"])();case 2:j(),d();case 4:case"end":return t.stop()}}),t)}))));Object(c["L"])(o,(function(t){for(var e=r.value,n=0;n<e.length-1;n++){var c=e[n],o=e[n+1];t>=c&&t<=o&&(u.value=n,i.value=o-t)}}));var h=function(t){o.value=-t.y},j=function(){var t=n.value.children,e=r.value,c=0;e.length=0,e.push(c);for(var o=0;o<t.length;o++)c+=t[o].clientHeight,e.push(c)};return{groupRef:n,onScroll:h,currentTitle:l,currentIndex:u,currentStyle:s}}n("d81d");function p(t,e){var n=Object(c["A"])(null),r=18,o={},u=Object(c["A"])(!1),a=Object(c["f"])((function(){return t.data.map((function(t){return t.title}))})),i=function(t){console.log("touch fixed");var e=parseInt(t.target.dataset.index);o.y1=t.touches[0].pageY,o.anchorIndex=e,u.value=!0,d(e)},l=function(t){o.y2=t.touches[0].pageY;var e=(o.y2-o.y1)/r|0,n=o.anchorIndex+e;u.value=!0,d(n)},s=function(t){u.value=!1},d=function(t){if(!isNaN(t)){t=Math.max(0,Math.min(a.value.length-1,t));var c=e.value.children[t],r=n.value.scroll;r.scrollToElement(c,0)}};return{shortcutList:a,scrollRef:n,isTouch:u,onShortcutTouchStart:i,onShortcutTouchMove:l,onShortcutTouchEnd:s}}var S={name:"singer-list",components:{Scroller:v["a"]},emits:["clickSinger"],props:{data:{type:Array,default:function(){return[]}}},setup:function(t,e){var n=e.emit,c=g(t),r=c.groupRef,o=c.onScroll,u=c.currentTitle,a=c.currentIndex,i=c.currentStyle,l=p(t,r),s=l.shortcutList,d=l.scrollRef,h=l.isTouch,j=l.onShortcutTouchStart,b=l.onShortcutTouchMove,f=l.onShortcutTouchEnd,O=function(t){console.log("onItemClick"),console.log(t),n("clickSinger",t)};return{groupRef:r,scrollRef:d,currentTitle:u,currentIndex:a,currentStyle:i,shortcutList:s,isTouch:h,onScroll:o,onShortcutTouchStart:j,onShortcutTouchMove:b,onShortcutTouchEnd:f,onItemClick:O}}};n("a77d");S.render=O,S.__scopeId="data-v-c9ad3716";var m=S,_={name:"singer",setup:function(){var t=Object(c["A"])([]);return Object(c["r"])(Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["b"])();case 2:n=e.sent,t.value=n.singers,console.log("singer result",n);case 5:case"end":return e.stop()}}),e)})))),{singers:t,clickedSinger:null,clickedSingerMid:null}},methods:{handleSingerClick:function(t){console.log("handleSingerClick"),console.log(t),this.clickedSinger=t,this.clickedSingerMid=t.mid,this.cacheSinger(t),this.$router.push({path:"/singer/".concat(t.name.replace(/ /g,"_"))})},cacheSinger:function(t){l["a"].session.set(s["f"],t)}},components:{SingerList:m}};n("5ca5");_.render=u,_.__scopeId="data-v-0a6db5f2";e["default"]=_},"2e82":function(t,e,n){},"5ca5":function(t,e,n){"use strict";n("2e82")},a77d:function(t,e,n){"use strict";n("d396")},ae58:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var c=n("58ff"),r=function(){return Object(c["a"])("/api/getSingerList")},o=function(t){return console.log("getSingerDetail",t.mid),Object(c["a"])("/api/getSingerDetail",{mid:t.mid})}},d396:function(t,e,n){}}]);